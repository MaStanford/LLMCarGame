WorldScreen {
    layers: base hud;
}

/* --- Debug Console --- */
#debug_console {
    layer: hud;
    dock: bottom;
    width: 100%;
    height: 3;
    margin-bottom: 2;
    background: $panel;
    border: heavy $accent;
}

GameView {
    layer: base;
    width: 100%;
    height: 100%;
}

/* --- Top HUD: centered column with location + compass --- */
#top_hud {
    layer: hud;
    dock: top;
    width: auto;
    height: auto;
    align: center top;
}

/* --- Bottom HUD: full-width row with quest + stats panes --- */
#bottom_hud {
    layer: hud;
    dock: bottom;
    width: 100%;
    height: 7;
    margin-bottom: 1;
}

#quest_hud, #stats_hud, #entity_modal, #weapon_hud {
    background: $panel;
}

#quest_hud {
    height: 7;
    width: 2fr;
}

#stats_hud {
    height: 7;
    width: 3fr;
}

/* --- Right HUD: vertical column with weapon + entity modal --- */
#right_hud {
    layer: hud;
    dock: right;
    width: 28;
    height: 1fr;
}

#weapon_hud {
    width: 100%;
    height: auto;
}

WeaponHUD {
    background: $panel;
    border: heavy white;
}

#right_spacer {
    height: 1fr;
}

#entity_modal {
    width: 100%;
    height: 12;
    margin-bottom: 8;
}

EntityModal {
    background: $panel;
    border: heavy white;
}

/* --- Location HUD --- */
#location_hud {
    width: auto;
    min-width: 30;
    max-width: 50;
    height: auto;
    background: $panel;
    border: heavy white;
}

/* --- Compass HUD --- */
#compass_hud {
    width: auto;
    min-width: 24;
    max-width: 40;
    height: auto;
    background: $panel;
    border: heavy white;
}

/* --- Notifications (inside top_hud, below compass) --- */
#notifications {
    width: auto;
    min-width: 30;
    max-width: 50;
    height: auto;
}

MainMenuScreen {
    align: center middle;
}

#main-menu-container {
    width: 40%;
    height: auto;
    align: center middle;
}

#main-menu-buttons {
    width: 100%;
    height: auto;
    align: center middle;
}

#main-menu-buttons Button {
    align: center middle;
    width: 50%;
    max-width: 40;
    margin: 1;
}

#model-loader-container {
    align: center middle;
    margin-top: 2;
    height: 5;
    width: 100%;
}

#model-loader-container #model_status {
    width: 50%;
    max-width: 50;
    text-align: center;
}

#model-loader-container ProgressBar {
    width: 50%;
    max-width: 50;
    margin-top: 1;
}


PauseScreen {
    align: center middle;
    layout: vertical;
    width: 30;
    height: auto;
}

PauseScreen Button {
    width: 40%;
    margin: 1;
    align: center middle;
}

InventoryScreen #inventory_grid {
    grid-size: 2;
    grid-gutter: 1;
    padding: 1;
}

#car_preview {
    border: heavy white;
    text-align: center;
    content-align: center middle;
}

#attachments {
    border: heavy white;
    height: 12;
}

#equipment_slots {
    border: heavy white;
    height: 10;
}

#item_info {
    border: heavy white;
    height: auto;
}

#inventory {
    border: heavy white;
}

#inventory_prompt {
    border: heavy white;
    padding: 1;
    height: 5;
}

#stats {
    border: heavy white;
}

ShopScreen {
    width: 100%;
    height: 100%;
}

ShopScreen #shop_page {
    padding: 1;
    height: 1fr;
}

/* --- Top row: inventory lists side by side --- */
ShopScreen #shop_lists_row {
    height: auto;
    max-height: 50%;
}

ShopScreen #shop_inventory_pane, ShopScreen #player_inventory_pane {
    width: 1fr;
    height: auto;
    max-height: 14;
    border: heavy white;
    overflow-y: auto;
    margin: 0 1 0 0;
}

ShopScreen #player_inventory_pane {
    margin: 0;
}

ShopScreen #shop_inventory, ShopScreen #player_inventory {
    height: auto;
}

/* --- Bottom row: 2-column detail area --- */
ShopScreen #shop_detail_row {
    height: 1fr;
    margin-top: 1;
}

ShopScreen #shop_left_col {
    width: 1fr;
    margin-right: 1;
}

ShopScreen #shop_right_col {
    width: 1fr;
}

ShopScreen #shop_dialog {
    border: heavy white;
    padding: 1;
    height: auto;
    max-height: 5;
}

ShopScreen ItemInfoWidget {
    margin-top: 1;
    height: 1fr;
    overflow-y: auto;
}

ShopScreen #shop_right_col MenuStatsHUD {
    height: 1fr;
    overflow-y: auto;
}

ShopScreen #action_button {
    width: 100%;
    min-width: 20;
    height: auto;
    margin-top: 1;
}

/* --- Shop-Specific Themes --- */
.mechanic-shop {
    background: #2d2d2d; /* Dark grey */
    color: #e0e0e0; /* Light grey text */
}
.mechanic-shop #shop_inventory_pane, .mechanic-shop #player_inventory_pane, .mechanic-shop #shop_dialog {
    border: heavy #ff8c00; /* Dark orange */
}

.gas-station {
    background: #f5f5dc; /* Beige */
    color: #8b0000; /* Dark red text */
}
.gas-station #shop_inventory_pane, .gas-station #player_inventory_pane, .gas-station #shop_dialog {
    border: heavy #008080; /* Teal */
}

.weapon-shop {
    background: #000000; /* Black */
    color: #00ff00; /* Green text */
}
.weapon-shop #shop_inventory_pane, .weapon-shop #player_inventory_pane, .weapon-shop #shop_dialog {
    border: heavy #808080; /* Grey */
}


CityHallScreen {
    layout: grid;
    grid-size: 2 1;
    grid-gutter: 1;
}

#quest_list_container {
    align: center middle;
}

#loading_container {
    align: center middle;
    height: auto;
    padding: 1 2;
}

#loading_container ProgressBar {
    width: 80%;
    margin-bottom: 1;
}

#loading_label {
    text-align: center;
    color: $text-muted;
    text-style: italic;
}

#item_list, #quest_list {
    column-span: 1;
    row-span: 1;
}

#item_info, #quest_info {
    column-span: 1;
    row-span: 1;
}

#dialog_box {
    column-span: 2;
    height: 3;
}
NewGameScreen {
    align: center middle;
}

#new-game-container {
    layout: vertical;
    width: 100%;
    height: 100%;
    align: center middle;
}

#new-game-layout {
    width: 90%;
    max-width: 120;
    height: 1fr;
    layout: horizontal;
    grid-size: 2;
    grid-gutter: 1;
}

#new-game-left-column {
    width: 1fr;
    height: 100%;
}

#new-game-right-column {
    width: 1fr;
    height: 100%;
    padding: 0 1;
}

#car-preview-container {
    height: 1fr;
    border: heavy white;
    align: center middle;
    margin-bottom: 1;
}

#car-preview {
    text-align: center;
}

.cycle-widgets-container {
    height: auto;
    margin-bottom: 1;
}

#weapon-list-container.focused {
    border: heavy yellow;
}

Button:focus {
    border: heavy yellow;
}


.panel-title {
    text-align: center;
    text-style: bold;
    margin-bottom: 1;
}

#weapon-list-container {
    height: 10;
    border: heavy white;
    padding: 1;
}

#item_info {
    height: 10;
    margin-top: 1;
}

#start_game {
    width: 90%;
    max-width: 120;
    margin-top: 1;
    dock: bottom;
}

#faction-loader-container {
    align: center middle;
    height: 3;
    margin-top: 1;
}

#faction-loader-container #faction_status {
    width: auto;
    margin-right: 2;
}

#faction-loader-container ProgressBar {
    width: 30;
}

SaveGameScreen {
    align: center middle;
}

#save_game_container {
    width: 50;
    height: auto;
    background: $panel;
    padding: 2;
    border: heavy white;
}

#save_prompt {
    text-align: center;
    margin-bottom: 1;
}

#save_name_input {
    margin-bottom: 1;
}

GameOverScreen {
    align: center middle;
}

#game-over-dialog {
    layout: vertical;
    width: 30;
    height: 17;
    border: heavy white;
    background: $panel;
    align: center middle;
}

#game-over-title {
    text-style: bold;
    color: red;
}

MechanicShopScreen {
    align: center middle;
}

#mechanic-shop-dialog {
    width: 60;
    height: 15;
    border: heavy white;
    background: $panel;
    align: center middle;
}

#mechanic-shop-title {
    text-style: bold;
}

Notifications {
    height: auto;
    background: $panel;
    color: $text;
}

Dialog {
    dock: bottom;
    height: 10;
    background: $panel;
    border: heavy white;
    padding: 1;
}

#dialog-prompt {
    color: yellow;
}

CutsceneScreen {
    align: center middle;
}

#cutscene-content {
    width: 80;
    height: 20;
    border: heavy white;
    background: $panel;
    align: center middle;
}

CityHallScreen {
    align: center middle;
}

#city-hall-dialog {
    width: 60;
    height: 15;
    border: heavy white;
    background: $panel;
    align: center middle;
}

#city-hall-title {
    text-style: bold;
}

QuestBriefingScreen {
    align: center middle;
}

QuestDetailScreen {
    align: center middle;
}

#quest-detail-container {
    width: 70;
    height: auto;
    max-height: 24;
    border: heavy white;
    background: $panel;
    padding: 1;
}

#quest_description {
    margin-bottom: 1;
}

#quest_objectives {
    margin-bottom: 1;
}

#quest_rewards {
    margin-bottom: 1;
}

#quest-buttons {
    height: auto;
    width: 100%;
}

#quest-buttons Button {
    width: 1fr;
    margin: 0 1;
}

#quest-briefing-dialog {
    width: 70;
    height: 22;
    border: heavy white;
    background: $panel;
    padding: 1;
}

#quest-briefing-title {
    text-style: bold;
    text-align: center;
}

CombatScreen {
    align: center middle;
}

#combat_grid {
    grid-size: 2;
    grid-gutter: 1;
    width: 100%;
    height: 15;
}

#player_panel, #enemy_panel {
    border: heavy white;
    align: center middle;
}

#combat_actions {
    grid-size: 3;
    grid-gutter: 1;
    width: 100%;
    height: 3;
}

#combat_log {
    height: 6;
    border: heavy white;
    padding: 1;
}

#faction_grid {
    grid-size: 2 1;
    grid-columns: 1fr 2fr;
    padding: 1;
}

#faction_details_container {
    border: heavy white;
    padding: 1;
}

.progress_bar_label {
    margin-top: 1;
}

WorldBuildingScreen {
    align: center middle;
}

WorldBuildingScreen #world-building-container {
    align: center middle;
    width: 60;
    height: auto;
}

WorldBuildingScreen #title {
    width: 100%;
    text-align: center;
    margin-top: 2;
    margin-bottom: 1;
}

WorldBuildingScreen ProgressBar {
    align: center middle;
    width: 100%;
    margin-bottom: 1;
}

WorldBuildingScreen #status_message {
    text-align: center;
    width: 100%;
}

WorldBuildingScreen .world-building-animation {
    text-align: center;
    height: 10;
    color: $text-muted;
    margin-bottom: 1;
}


WorldBuildingScreen Button {
    width: 30;
    margin-top: 1;
}

ThemeSelectionScreen {
    align: center middle;
}

ThemeSelectionScreen #theme-selection-container {
    width: 80;
    height: auto;
    align: center middle;
}

ThemeSelectionScreen #title {
    text-align: center;
    text-style: bold;
    margin-bottom: 1;
}

ThemeSelectionScreen #subtitle {
    text-align: center;
    margin-bottom: 2;
}

ThemeSelectionScreen #theme-buttons-container Button {
    width: 100%;
    height: 5;
    margin-bottom: 1;
}

ThemeSelectionScreen ProgressBar {
    width: 60%;
    margin-bottom: 1;
}

ThemeSelectionScreen .theme-animation {
    text-align: center;
    height: 8;
    color: $text-muted;
    margin-bottom: 1;
    border: heavy gray;
}

IntroCutsceneScreen {
    align: center middle;
}

IntroCutsceneScreen #intro-cutscene-container {
    width: 80%;
    max-width: 100;
    height: auto;
    background: $panel;
    padding: 2;
    border: heavy white;
}

IntroCutsceneScreen #intro-text {
    margin-bottom: 2;
}

IntroCutsceneScreen Button {
    width: 100%;
}

SettingsScreen {
    align: center middle;
}

SettingsScreen #settings-container {
    width: 60;
    height: auto;
    align: center middle;
}

SettingsScreen #title {
    text-align: center;
    margin-bottom: 2;
}

SettingsScreen .setting-label {
    text-style: bold;
    margin-top: 1;
}

SettingsScreen Button {
    width: 100%;
    margin-top: 1;
}

SettingsScreen #back {
    margin-top: 2;
}

StoryScreen {
    align: center middle;
}

#story-scroll {
    width: 80%;
    max-width: 100;
    height: 100%;
    background: $panel;
    border: heavy white;
    padding: 1 2;
}

#story_title {
    text-align: center;
    text-style: bold;
    margin-bottom: 1;
}

#story_theme {
    margin-bottom: 1;
    color: $text-muted;
}

#story_intro {
    margin-bottom: 1;
}

#story_chronicle {
    margin-bottom: 1;
}

#story_current {
    margin-bottom: 1;
}

#story_world_state {
    margin-bottom: 1;
}

/* --- Boss Key Screen --- */
BossKeyScreen {
    width: 100%;
    height: 100%;
    background: black;
    layout: vertical;
}

#boss-key-display {
    width: 100%;
    height: 1fr;
    background: black;
    color: #00ff00;
    overflow-y: auto;
    padding: 0 1;
}

#boss-key-statusbar {
    width: 100%;
    height: 1;
    background: #005f00;
    color: #00ff00;
    dock: bottom;
    padding: 0 1;
}
